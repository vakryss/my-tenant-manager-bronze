<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Utilities â€“ Tenant Manager</title>

  <!-- Prevent flash before auth -->
  <style>
    html { visibility: hidden; }
    body { font-family: Arial, sans-serif; }
    table { border-collapse: collapse; }
    th, td { padding: 6px; }
  </style>

  <script type="module">
    import { supabase } from "./scripts/supabase.js";

    const { data: { session } } = await supabase.auth.getSession();

    if (!session) {
      window.location.replace("/login.html");
    } else {
      document.documentElement.style.visibility = "visible";
    }
  </script>
</head>

<body>

<h1>Utilities</h1>
<p>Bronze Tier</p>

<hr>

<h2>Add Utility Charge</h2>

<label>Tenant</label><br>
<select id="tenantSelect">
  <option value="">N/A</option>
</select>

<br><br>

<label>Utility Type</label><br>
<select id="utilityType">
  <option value="">N/A</option>
  <option>Electric</option>
  <option>Water</option>
  <option>Wi-Fi</option>
</select>

<br><br>

<label>Charge Date</label><br>
<input id="chargeDate" type="date">

<br><br>

<label>Amount</label><br>
<input id="amount" type="number" step="0.01" min="0">

<br><br>

<label>Notes (optional)</label><br>
<input id="notes" type="text">

<br><br>

<button id="saveUtilityBtn">Save Utility Charge</button>
<p id="utilityMessage">N/A</p>

<hr>

<h2>Utility Charges</h2>

<table border="1">
  <thead>
    <tr>
      <th>Date</th>
      <th>Tenant</th>
      <th>Utility</th>
      <th>Amount</th>
    </tr>
  </thead>
  <tbody id="utilityTableBody">
    <tr>
      <td colspan="4">N/A</td>
    </tr>
  </tbody>
</table>

<hr>

<button onclick="window.location.href='/ledger.html'">View Ledger</button>
<button onclick="window.location.href='/index.html'">Back to Dashboard</button>
<button id="logoutBtn">Logout</button>

<script type="module" src="./scripts/utilities.js"></script>

</body>
</html>
